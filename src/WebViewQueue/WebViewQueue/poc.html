<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
    </head>
    <body>
        <p>Test</p>
        <script>
            function ping(id) {
                window.webkit.messageHandlers.continueHandler.postMessage({"pongId":id});
            }
            
            function someLongRunningProcess(id, queued) {
                delay(1000);
                setTimeout(function() {
                    window.webkit.messageHandlers.continueHandler.postMessage({"dataRequestProcessId":id, "queued":queued});
                }, 0);
            }
        
            function continueLongRunningProcess(id, queued) {
                delay(1000);
                setTimeout(function() {
                    window.webkit.messageHandlers.continueHandler.postMessage({"networkRequestProcessId":id, "queued":queued});
                }, 0);
            }
        
            function finishLongRunningProcess(id, queued) {
                delay(1000);
                setTimeout(function() {
                    window.webkit.messageHandlers.continueHandler.postMessage({"completedProcessId":id, "queued":queued});
                }, 0);
            }
        
            function getRandomInt(min, max) {
                return Math.floor(Math.random() * (max - min + 1)) + min;
            }
        
            function delay(ms) {
                var cur_d = new Date();
                var cur_ticks = cur_d.getTime();
                var ms_passed = 0;
                while(ms_passed < ms) {
                    var d = new Date();
                    var ticks = d.getTime();
                    ms_passed = ticks - cur_ticks;
                }
            }
        </script>
    </body>
</html>
